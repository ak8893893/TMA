<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT Wallet Demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        .container { 
            padding: 20px; 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        .button { 
            background: #3498db; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        .button:hover { 
            background: #2980b9; 
        }
        .button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        .error { 
            color: #e74c3c; 
            margin: 10px 0;
            padding: 10px;
            background: #fadbd8;
            border-radius: 4px;
        }
        .success { 
            color: #27ae60; 
            margin: 10px 0;
            padding: 10px;
            background: #d4efdf;
            border-radius: 4px;
        }
        .network-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .contract-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .claim-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-field {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
            width: 100px;
        }
        .loading {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 8px;
        }
        .status-badge.active {
            background: #dff0d8;
            color: #3c763d;
        }
        .status-badge.pending {
            background: #fcf8e3;
            color: #8a6d3b;
        }
        .nft-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .nft-metadata {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .nft-card img {
            margin: 10px 0;
        }
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
</body>
</html>

<script type="text/babel">
    // 定義網絡配置
    const NETWORKS = {
    MANTLE: {
        chainId: '0x1388', // 要修改這裡，從 '5000' 改為 '0x1388'
        chainName: 'Mantle',
        nativeCurrency: {
            name: 'MNT',
            symbol: 'MNT',
            decimals: 18
        },
        rpcUrls: ['https://rpc.mantle.xyz'],
        blockExplorerUrls: ['https://explorer.mantle.xyz']
    },
    BASE: {
        chainId: '0x2105', // 要修改這裡，從 '8453' 改為 '0x2105'
        chainName: 'Base Mainnet',
        nativeCurrency: {
            name: 'ETH',
            symbol: 'ETH',
            decimals: 18
        },
        rpcUrls: ['https://mainnet.base.org'],
        blockExplorerUrls: ['https://basescan.org']
    }
};

    // 完整的合約 ABI
    const contractABI = [
    {
        "inputs": [],
        "stateMutability": "nonpayable",
        "type": "constructor"
    },
    {
        "inputs": [],
        "name": "ApprovalCallerNotOwnerNorApproved",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "ApprovalQueryForNonexistentToken",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "ApprovalToCurrentOwner",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "ApproveToCaller",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "BalanceQueryForZeroAddress",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "MintToZeroAddress",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "MintZeroQuantity",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "OwnerQueryForNonexistentToken",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "TransferCallerNotOwnerNorApproved",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "TransferFromIncorrectOwner",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "TransferToNonERC721ReceiverImplementer",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "TransferToZeroAddress",
        "type": "error"
    },
    {
        "inputs": [],
        "name": "URIQueryForNonexistentToken",
        "type": "error"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "owner",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "approved",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "Approval",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "owner",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "operator",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "bool",
                "name": "approved",
                "type": "bool"
            }
        ],
        "name": "ApprovalForAll",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "_fromTokenId",
                "type": "uint256"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "_toTokenId",
                "type": "uint256"
            }
        ],
        "name": "BatchMetadataUpdate",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "components": [
                    {
                        "internalType": "uint256",
                        "name": "startTimestamp",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "maxClaimableSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "supplyClaimed",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "quantityLimitPerWallet",
                        "type": "uint256"
                    },
                    {
                        "internalType": "bytes32",
                        "name": "merkleRoot",
                        "type": "bytes32"
                    },
                    {
                        "internalType": "uint256",
                        "name": "pricePerToken",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "currency",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "metadata",
                        "type": "string"
                    }
                ],
                "indexed": false,
                "internalType": "struct IClaimCondition.ClaimCondition[]",
                "name": "claimConditions",
                "type": "tuple[]"
            },
            {
                "indexed": false,
                "internalType": "bool",
                "name": "resetEligibility",
                "type": "bool"
            }
        ],
        "name": "ClaimConditionsUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "string",
                "name": "prevURI",
                "type": "string"
            },
            {
                "indexed": false,
                "internalType": "string",
                "name": "newURI",
                "type": "string"
            }
        ],
        "name": "ContractURIUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "newRoyaltyRecipient",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "newRoyaltyBps",
                "type": "uint256"
            }
        ],
        "name": "DefaultRoyalty",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "address",
                "name": "platformFeeRecipient",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "flatFee",
                "type": "uint256"
            }
        ],
        "name": "FlatPlatformFeeUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "uint8",
                "name": "version",
                "type": "uint8"
            }
        ],
        "name": "Initialized",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "maxTotalSupply",
                "type": "uint256"
            }
        ],
        "name": "MaxTotalSupplyUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [],
        "name": "MetadataFrozen",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "prevOwner",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "newOwner",
                "type": "address"
            }
        ],
        "name": "OwnerUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "platformFeeRecipient",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "platformFeeBps",
                "type": "uint256"
            }
        ],
        "name": "PlatformFeeInfoUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "enum IPlatformFee.PlatformFeeType",
                "name": "feeType",
                "type": "uint8"
            }
        ],
        "name": "PlatformFeeTypeUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "recipient",
                "type": "address"
            }
        ],
        "name": "PrimarySaleRecipientUpdated",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "indexed": true,
                "internalType": "bytes32",
                "name": "previousAdminRole",
                "type": "bytes32"
            },
            {
                "indexed": true,
                "internalType": "bytes32",
                "name": "newAdminRole",
                "type": "bytes32"
            }
        ],
        "name": "RoleAdminChanged",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "account",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "sender",
                "type": "address"
            }
        ],
        "name": "RoleGranted",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "account",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "sender",
                "type": "address"
            }
        ],
        "name": "RoleRevoked",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "royaltyRecipient",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "royaltyBps",
                "type": "uint256"
            }
        ],
        "name": "RoyaltyForToken",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "index",
                "type": "uint256"
            },
            {
                "indexed": false,
                "internalType": "string",
                "name": "revealedURI",
                "type": "string"
            }
        ],
        "name": "TokenURIRevealed",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "claimConditionIndex",
                "type": "uint256"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "claimer",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "receiver",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "startTokenId",
                "type": "uint256"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "quantityClaimed",
                "type": "uint256"
            }
        ],
        "name": "TokensClaimed",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "startTokenId",
                "type": "uint256"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "endTokenId",
                "type": "uint256"
            },
            {
                "indexed": false,
                "internalType": "string",
                "name": "baseURI",
                "type": "string"
            },
            {
                "indexed": false,
                "internalType": "bytes",
                "name": "encryptedBaseURI",
                "type": "bytes"
            }
        ],
        "name": "TokensLazyMinted",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "internalType": "address",
                "name": "from",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "address",
                "name": "to",
                "type": "address"
            },
            {
                "indexed": true,
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "Transfer",
        "type": "event"
    },
    {
        "inputs": [],
        "name": "DEFAULT_ADMIN_ROLE",
        "outputs": [
            {
                "internalType": "bytes32",
                "name": "",
                "type": "bytes32"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "to",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "approve",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "owner",
                "type": "address"
            }
        ],
        "name": "balanceOf",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "batchFrozen",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "burn",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_receiver",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_quantity",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_currency",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_pricePerToken",
                "type": "uint256"
            },
            {
                "components": [
                    {
                        "internalType": "bytes32[]",
                        "name": "proof",
                        "type": "bytes32[]"
                    },
                    {
                        "internalType": "uint256",
                        "name": "quantityLimitPerWallet",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "pricePerToken",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "currency",
                        "type": "address"
                    }
                ],
                "internalType": "struct IDrop.AllowlistProof",
                "name": "_allowlistProof",
                "type": "tuple"
            },
            {
                "internalType": "bytes",
                "name": "_data",
                "type": "bytes"
            }
        ],
        "name": "claim",
        "outputs": [],
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "claimCondition",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "currentStartId",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "count",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "contractType",
        "outputs": [
            {
                "internalType": "bytes32",
                "name": "",
                "type": "bytes32"
            }
        ],
        "stateMutability": "pure",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "contractURI",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "contractVersion",
        "outputs": [
            {
                "internalType": "uint8",
                "name": "",
                "type": "uint8"
            }
        ],
        "stateMutability": "pure",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes",
                "name": "data",
                "type": "bytes"
            },
            {
                "internalType": "bytes",
                "name": "key",
                "type": "bytes"
            }
        ],
        "name": "encryptDecrypt",
        "outputs": [
            {
                "internalType": "bytes",
                "name": "result",
                "type": "bytes"
            }
        ],
        "stateMutability": "pure",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "encryptedData",
        "outputs": [
            {
                "internalType": "bytes",
                "name": "",
                "type": "bytes"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_index",
                "type": "uint256"
            }
        ],
        "name": "freezeBatchBaseURI",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getActiveClaimConditionId",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "getApproved",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getBaseURICount",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_index",
                "type": "uint256"
            }
        ],
        "name": "getBatchIdAtIndex",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_conditionId",
                "type": "uint256"
            }
        ],
        "name": "getClaimConditionById",
        "outputs": [
            {
                "components": [
                    {
                        "internalType": "uint256",
                        "name": "startTimestamp",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "maxClaimableSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "supplyClaimed",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "quantityLimitPerWallet",
                        "type": "uint256"
                    },
                    {
                        "internalType": "bytes32",
                        "name": "merkleRoot",
                        "type": "bytes32"
                    },
                    {
                        "internalType": "uint256",
                        "name": "pricePerToken",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "currency",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "metadata",
                        "type": "string"
                    }
                ],
                "internalType": "struct IClaimCondition.ClaimCondition",
                "name": "condition",
                "type": "tuple"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getDefaultRoyaltyInfo",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "uint16",
                "name": "",
                "type": "uint16"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getFlatPlatformFeeInfo",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getPlatformFeeInfo",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "uint16",
                "name": "",
                "type": "uint16"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getPlatformFeeType",
        "outputs": [
            {
                "internalType": "enum IPlatformFee.PlatformFeeType",
                "name": "",
                "type": "uint8"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_batchId",
                "type": "uint256"
            },
            {
                "internalType": "bytes",
                "name": "_key",
                "type": "bytes"
            }
        ],
        "name": "getRevealURI",
        "outputs": [
            {
                "internalType": "string",
                "name": "revealedURI",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            }
        ],
        "name": "getRoleAdmin",
        "outputs": [
            {
                "internalType": "bytes32",
                "name": "",
                "type": "bytes32"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "uint256",
                "name": "index",
                "type": "uint256"
            }
        ],
        "name": "getRoleMember",
        "outputs": [
            {
                "internalType": "address",
                "name": "member",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            }
        ],
        "name": "getRoleMemberCount",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "count",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_tokenId",
                "type": "uint256"
            }
        ],
        "name": "getRoyaltyInfoForToken",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "uint16",
                "name": "",
                "type": "uint16"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_conditionId",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_claimer",
                "type": "address"
            }
        ],
        "name": "getSupplyClaimedByWallet",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "supplyClaimedByWallet",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "address",
                "name": "account",
                "type": "address"
            }
        ],
        "name": "grantRole",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "address",
                "name": "account",
                "type": "address"
            }
        ],
        "name": "hasRole",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "address",
                "name": "account",
                "type": "address"
            }
        ],
        "name": "hasRoleWithSwitch",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_defaultAdmin",
                "type": "address"
            },
            {
                "internalType": "string",
                "name": "_name",
                "type": "string"
            },
            {
                "internalType": "string",
                "name": "_symbol",
                "type": "string"
            },
            {
                "internalType": "string",
                "name": "_contractURI",
                "type": "string"
            },
            {
                "internalType": "address[]",
                "name": "_trustedForwarders",
                "type": "address[]"
            },
            {
                "internalType": "address",
                "name": "_saleRecipient",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "_royaltyRecipient",
                "type": "address"
            },
            {
                "internalType": "uint128",
                "name": "_royaltyBps",
                "type": "uint128"
            },
            {
                "internalType": "uint128",
                "name": "_platformFeeBps",
                "type": "uint128"
            },
            {
                "internalType": "address",
                "name": "_platformFeeRecipient",
                "type": "address"
            }
        ],
        "name": "initialize",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "owner",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "operator",
                "type": "address"
            }
        ],
        "name": "isApprovedForAll",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_batchId",
                "type": "uint256"
            }
        ],
        "name": "isEncryptedBatch",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "forwarder",
                "type": "address"
            }
        ],
        "name": "isTrustedForwarder",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_amount",
                "type": "uint256"
            },
            {
                "internalType": "string",
                "name": "_baseURIForTokens",
                "type": "string"
            },
            {
                "internalType": "bytes",
                "name": "_data",
                "type": "bytes"
            }
        ],
        "name": "lazyMint",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "batchId",
                "type": "uint256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxTotalSupply",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes[]",
                "name": "data",
                "type": "bytes[]"
            }
        ],
        "name": "multicall",
        "outputs": [
            {
                "internalType": "bytes[]",
                "name": "results",
                "type": "bytes[]"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "name",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "nextTokenIdToClaim",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "nextTokenIdToMint",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "owner",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "ownerOf",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "primarySaleRecipient",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "address",
                "name": "account",
                "type": "address"
            }
        ],
        "name": "renounceRole",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_index",
                "type": "uint256"
            },
            {
                "internalType": "bytes",
                "name": "_key",
                "type": "bytes"
            }
        ],
        "name": "reveal",
        "outputs": [
            {
                "internalType": "string",
                "name": "revealedURI",
                "type": "string"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes32",
                "name": "role",
                "type": "bytes32"
            },
            {
                "internalType": "address",
                "name": "account",
                "type": "address"
            }
        ],
        "name": "revokeRole",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "salePrice",
                "type": "uint256"
            }
        ],
        "name": "royaltyInfo",
        "outputs": [
            {
                "internalType": "address",
                "name": "receiver",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "royaltyAmount",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "from",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "to",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "safeTransferFrom",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "from",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "to",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            },
            {
                "internalType": "bytes",
                "name": "_data",
                "type": "bytes"
            }
        ],
        "name": "safeTransferFrom",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "operator",
                "type": "address"
            },
            {
                "internalType": "bool",
                "name": "approved",
                "type": "bool"
            }
        ],
        "name": "setApprovalForAll",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "components": [
                    {
                        "internalType": "uint256",
                        "name": "startTimestamp",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "maxClaimableSupply",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "supplyClaimed",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "quantityLimitPerWallet",
                        "type": "uint256"
                    },
                    {
                        "internalType": "bytes32",
                        "name": "merkleRoot",
                        "type": "bytes32"
                    },
                    {
                        "internalType": "uint256",
                        "name": "pricePerToken",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "currency",
                        "type": "address"
                    },
                    {
                        "internalType": "string",
                        "name": "metadata",
                        "type": "string"
                    }
                ],
                "internalType": "struct IClaimCondition.ClaimCondition[]",
                "name": "_conditions",
                "type": "tuple[]"
            },
            {
                "internalType": "bool",
                "name": "_resetClaimEligibility",
                "type": "bool"
            }
        ],
        "name": "setClaimConditions",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "string",
                "name": "_uri",
                "type": "string"
            }
        ],
        "name": "setContractURI",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_royaltyRecipient",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_royaltyBps",
                "type": "uint256"
            }
        ],
        "name": "setDefaultRoyaltyInfo",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_platformFeeRecipient",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_flatFee",
                "type": "uint256"
            }
        ],
        "name": "setFlatPlatformFeeInfo",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_maxTotalSupply",
                "type": "uint256"
            }
        ],
        "name": "setMaxTotalSupply",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_newOwner",
                "type": "address"
            }
        ],
        "name": "setOwner",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_platformFeeRecipient",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_platformFeeBps",
                "type": "uint256"
            }
        ],
        "name": "setPlatformFeeInfo",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "enum IPlatformFee.PlatformFeeType",
                "name": "_feeType",
                "type": "uint8"
            }
        ],
        "name": "setPlatformFeeType",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_saleRecipient",
                "type": "address"
            }
        ],
        "name": "setPrimarySaleRecipient",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_tokenId",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_recipient",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_bps",
                "type": "uint256"
            }
        ],
        "name": "setRoyaltyInfoForToken",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "bytes4",
                "name": "interfaceId",
                "type": "bytes4"
            }
        ],
        "name": "supportsInterface",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "symbol",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_tokenId",
                "type": "uint256"
            }
        ],
        "name": "tokenURI",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "totalMinted",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "totalSupply",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "from",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "to",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "tokenId",
                "type": "uint256"
            }
        ],
        "name": "transferFrom",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_index",
                "type": "uint256"
            },
            {
                "internalType": "string",
                "name": "_uri",
                "type": "string"
            }
        ],
        "name": "updateBatchBaseURI",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_conditionId",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_claimer",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_quantity",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_currency",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_pricePerToken",
                "type": "uint256"
            },
            {
                "components": [
                    {
                        "internalType": "bytes32[]",
                        "name": "proof",
                        "type": "bytes32[]"
                    },
                    {
                        "internalType": "uint256",
                        "name": "quantityLimitPerWallet",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "pricePerToken",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "currency",
                        "type": "address"
                    }
                ],
                "internalType": "struct IDrop.AllowlistProof",
                "name": "_allowlistProof",
                "type": "tuple"
            }
        ],
        "name": "verifyClaim",
        "outputs": [
            {
                "internalType": "bool",
                "name": "isOverride",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    }
];

function NFTInfo({ contractAddress, account }) {
    const [nftData, setNftData] = React.useState({
        balance: 0,
        tokens: []
    });
    const [isLoading, setIsLoading] = React.useState(false);

    const getNFTInfo = async () => {
    setIsLoading(true);
    try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const contract = new ethers.Contract(contractAddress, contractABI, provider);
        
        // 只獲取 balance
        const balance = await contract.balanceOf(account);
        console.log('Balance:', balance.toString());
        
        // 獲取已鑄造的總量
        const totalMinted = await contract.totalMinted();
        console.log('Total Minted:', totalMinted.toString());
        
        // 直接將餘額設置為持有數量
        setNftData({
            balance: balance.toString(),
            tokens: [] // 暫時不獲取具體 NFT 信息
        });

    } catch (error) {
        console.error('獲取NFT信息錯誤:', error);
    } finally {
        setIsLoading(false);
    }
};

    React.useEffect(() => {
        if (account) {
            getNFTInfo();
        }
    }, [account]);

    return (
    <div className="nft-info">
        <h3>NFT 持有信息</h3>
        <p>持有數量: {nftData.balance}</p>
        
        {isLoading ? (
            <div style={{ textAlign: 'center', padding: '20px' }}>
                <div className="loading-spinner"></div>
                <p>正在加載 NFT 信息...</p>
            </div>
        ) : null}
    </div>
);
}

function NFTWalletDemo() {
            const [account, setAccount] = React.useState('');
            const [nfts, setNfts] = React.useState([]);
            const [isConnected, setIsConnected] = React.useState(false);
            const [error, setError] = React.useState('');
            const [success, setSuccess] = React.useState('');
            const [networkInfo, setNetworkInfo] = React.useState({});
            const [isLoading, setIsLoading] = React.useState(false);
            const [contractInfo, setContractInfo] = React.useState({
                name: '',
                symbol: '',
                totalSupply: 0,
                maxSupply: 0
            });
            const [claimInfo, setClaimInfo] = React.useState(null);
            const [claimAmount, setClaimAmount] = React.useState(1);

            const contractAddress = '0xc799d8f3ad911a03ac1e1f93baa2e961b4047803';

            const getNetworkInfo = async () => {
                try {
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const chainId = await window.ethereum.request({ 
                        method: 'eth_chainId' 
                    });
                    
                    // 根據 chainId 判斷網路名稱
                    let networkName = 'Unknown';
                    let displayChainId = chainId;
                    
                    if (chainId === '0x1388') {
                        networkName = 'Mantle';
                        displayChainId = '5000';
                    } else if (chainId === '0x2105') {
                        networkName = 'Base';
                        displayChainId = '8453';
                    }
                    
                    setNetworkInfo({
                        name: networkName,
                        chainId: displayChainId
                    });
                } catch (err) {
                    console.error('獲取網絡信息錯誤:', err);
                }
            };

            const switchNetwork = async (networkKey) => {
                try {
                    const network = NETWORKS[networkKey];
                    // 先嘗試切換網絡
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: network.chainId }],
                        });
                    } catch (switchError) {
                        // 如果網絡不存在，則添加網絡
                        if (switchError.code === 4902) {
                            await window.ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [
                                    {
                                        chainId: network.chainId,
                                        chainName: network.chainName,
                                        nativeCurrency: network.nativeCurrency,
                                        rpcUrls: network.rpcUrls,
                                        blockExplorerUrls: network.blockExplorerUrls
                                    }
                                ]
                            });
                        } else {
                            throw switchError;
                        }
                    }
                    
                    await getNetworkInfo();
                    if (isConnected) {
                        await getContractInfo();
                    }
                } catch (error) {
                    console.error('切換網絡錯誤:', error);
                    setError('切換網絡失敗: ' + error.message);
                }
            };

            const connectWallet = async () => {
                setError('');
                setIsLoading(true);
                try {
                    if (window.ethereum) {
                        const accounts = await window.ethereum.request({
                            method: 'eth_requestAccounts'
                        });
                        setAccount(accounts[0]);
                        setIsConnected(true);
                        await getNetworkInfo();
                        await getContractInfo();
                    } else {
                        setError('請安裝 MetaMask!');
                    }
                } catch (error) {
                    console.error('連接錢包錯誤:', error);
                    setError('連接錢包失敗: ' + error.message);
                } finally {
                    setIsLoading(false);
                }
            };

            const getContractInfo = async () => {
                try {
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const signer = provider.getSigner();
                    const contract = new ethers.Contract(contractAddress, contractABI, signer);

                    const [name, symbol, totalSupply, maxSupply] = await Promise.all([
                        contract.name(),
                        contract.symbol(),
                        contract.totalSupply(),
                        contract.maxTotalSupply()
                    ]);

                    setContractInfo({
                        name,
                        symbol,
                        totalSupply: totalSupply.toString(),
                        maxSupply: maxSupply.toString()
                    });

                    // 獲取當前 claim condition
                    const currentConditionId = await contract.getActiveClaimConditionId();
                    const claimCondition = await contract.getClaimConditionById(currentConditionId);

                    setClaimInfo({
                        maxClaimable: claimCondition.maxClaimableSupply.toString(),
                        claimed: claimCondition.supplyClaimed.toString(),
                        price: ethers.utils.formatEther(claimCondition.pricePerToken),
                        maxPerWallet: claimCondition.quantityLimitPerWallet.toString(),
                        currency: claimCondition.currency
                    });

                } catch (error) {
                    console.error('獲取合約信息錯誤:', error);
                    setError('獲取合約信息失敗: ' + error.message);
                }
            };

            const claim = async () => {
                if (!claimAmount || claimAmount <= 0) {
                    setError('請輸入正確的數量');
                    return;
                }

                setError('');
                setSuccess('');
                setIsLoading(true);

                try {
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const signer = provider.getSigner();
                    const contract = new ethers.Contract(contractAddress, contractABI, signer);

                    const tx = await contract.claim(
                        account,
                        claimAmount,
                        claimInfo.currency,
                        ethers.utils.parseEther(claimInfo.price),
                        { 
                            proof: [], 
                            quantityLimitPerWallet: 0, 
                            pricePerToken: 0, 
                            currency: ethers.constants.AddressZero 
                        },
                        "0x",
                        { 
                            value: ethers.utils.parseEther(
                                (Number(claimInfo.price) * claimAmount).toString()
                            ) 
                        }
                    );

                    setSuccess('Claim 交易已發送，等待確認...');
                    
                    await tx.wait();
                    setSuccess('Claim 成功！');
                    await getContractInfo();
                } catch (error) {
                    console.error('Claim 錯誤:', error);
                    setError('Claim 失敗: ' + error.message);
                } finally {
                    setIsLoading(false);
                }
            };

            React.useEffect(() => {
                if (window.ethereum) {
                    window.ethereum.on('chainChanged', async (chainId) => {
                        await getNetworkInfo();
                        if (account) {
                            await getContractInfo();
                        }
                    });

                    window.ethereum.on('accountsChanged', async (accounts) => {
                        if (accounts.length > 0) {
                            setAccount(accounts[0]);
                            await getContractInfo();
                        } else {
                            setAccount('');
                            setIsConnected(false);
                        }
                    });
                }
            }, [account]);


            return (
                <div className="container">
                    <h1>NFT Drop Demo</h1>
                    
                    {!isConnected ? (
                        <button 
                            className="button" 
                            onClick={connectWallet} 
                            disabled={isLoading}
                        >
                            {isLoading ? '連接中...' : '連接錢包'}
                        </button>
                    ) : (
                        <div>
                            <div className="network-info">
                                <p>錢包地址: {account}</p>
                                <p>網絡名稱: {networkInfo.name || 'Unknown'}</p>
                                <p>Chain ID: {networkInfo.chainId || 'Unknown'}</p>
                                
                                <div style={{ marginTop: '10px' }}>
                                    <button 
                                        className="button" 
                                        onClick={() => switchNetwork('MANTLE')}
                                        disabled={isLoading}
                                    >
                                        切換到 Mantle
                                    </button>
                                    <button 
                                        className="button" 
                                        onClick={() => switchNetwork('BASE')}
                                        disabled={isLoading}
                                    >
                                        切換到 Base
                                    </button>
                                </div>
                            </div>

                            {contractInfo.name && (
                                <div className="contract-info">
                                    <h2>{contractInfo.name} ({contractInfo.symbol})</h2>
                                    <p>總供應量: {contractInfo.totalSupply} / {contractInfo.maxSupply}</p>
                                </div>
                            )}

                            {claimInfo && (
                                <div className="claim-info">
                                    <h3>Mint 信息</h3>
                                    <p>已鑄造數量: {claimInfo.claimed} / {claimInfo.maxClaimable}</p>
                                    <p>單個錢包上限: {claimInfo.maxPerWallet}</p>
                                    <p>價格: {claimInfo.price} {
                                        networkInfo.chainId === '0x1388' ? 'MNT' : 
                                        networkInfo.chainId === '0x2105' ? 'ETH' : 
                                        'ETH'
                                    }</p>
                                    
                                    <div style={{ marginTop: '15px' }}>
                                        <input 
                                            type="number" 
                                            className="input-field"
                                            value={claimAmount}
                                            onChange={(e) => setClaimAmount(e.target.value)}
                                            min="1"
                                            max={claimInfo.maxPerWallet}
                                            disabled={isLoading}
                                        />
                                        <button 
                                            className="button"
                                            onClick={claim}
                                            disabled={isLoading || !claimAmount || claimAmount <= 0}
                                        >
                                            {isLoading ? 'Minting...' : 'Mint'}
                                        </button>
                                    </div>
                                </div>
                            )}

                            {error && (
                                <div className="error">
                                    {error}
                                </div>
                            )}
                            
                            {success && (
                                <div className="success">
                                    {success}
                                </div>
                            )}
                        </div>
                    )}

                    {isConnected && (
                        <NFTInfo 
                            contractAddress={contractAddress} 
                            account={account} 
                        />
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NFTWalletDemo />);
    </script>
</body>
</html>